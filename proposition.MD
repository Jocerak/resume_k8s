Voici le texte que vous avez fourni, remis en forme et clarifi√© pour une meilleure lisibilit√©.

---

# Sujet : Je suis un √©tudiant qui manque de budget

## CHAPITRE 1

### **Solution**

#### 1. Mettre la solution en local (installer sur votre PC)

#### 2. Virtualiser une machine Linux sur votre PC physique Windows

#### 3. Installer tous les pr√©requis

- **Installer Minikube sur votre VM** : Vous pouvez suivre le lien du site officiel en cliquant [ici](https://minikube.sigs.k8s.io/docs/start).

**Minikube**, c'est quoi ?
> Minikube est un Kubernetes local, ax√© sur la facilit√© d'apprentissage et de d√©veloppement pour Kubernetes. Tout ce dont vous avez besoin, c'est d'un conteneur Docker (ou similaire compatible) ou d'un environnement de machine virtuelle.

- **V√©rification de l'installation** : Pour v√©rifier si l'installation est bien faite, ex√©cutez la commande suivante : `minikube --help`

- [Documentation pour l'installation de kubectl](https://kubernetes.io/fr/docs/tasks/tools/install-kubectl/)

Pour installer **kubectl**, collez la commande suivante dans votre terminal :

```bash
sudo apt-get update && sudo apt-get install -y apt-transport-https
curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
echo "deb https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee -a /etc/apt/sources.list.d/kubernetes.list
sudo apt-get update
sudo apt-get install -y kubectl 
```

Pour v√©rifier l'installation de **kubectl**, ex√©cutez la commande :  
`kubectl --help`

#### 4. Cr√©er un cluster avec Minikube

Pour cr√©er un cluster Kubernetes, tapez la commande suivante dans votre terminal :  
`minikube start`

Un cluster est un r√©seau de machines qui communiquent entre elles pour faire fonctionner vos applications. Voici un exemple de retour apr√®s l'ex√©cution de `minikube start` :

>üòÑ  minikube v1.34.0 sur Ubuntu 24.04
>‚ú®  Choix automatique du pilote docker
>üìå  Utilisation du pilote Docker avec le privil√®ge root
>üëç  D√©marrage du n≈ìud "minikube" primary control-plane dans le cluster "minikube"
>üöú  Extraction de l'image de base v0.0.45...
>üî•  Cr√©ation de docker container (CPU=2, Memory=3900Mo) ...
>üê≥  Pr√©paration de Kubernetes v1.31.0 sur Docker 27.2.0...
>    ‚ñ™ G√©n√©ration des certificats et des cl√©s
>    ‚ñ™ D√©marrage du plan de contr√¥le ...
>    ‚ñ™ Configuration des r√®gles RBAC ...
>üîó  Configuration de bridge CNI (Container Networking Interface)...
>üîé  V√©rification des composants Kubernetes...
>    ‚ñ™ Utilisation de l'image gcr.io/k8s-minikube/storage-provisioner:v5
>üåü  Modules activ√©s: default-storageclass, storage-provisioner
>üèÑ  Termin√© ! kubectl est maintenant configur√© pour utiliser "minikube" cluster et espace de noms "default" par d√©faut.

---

### D√©ploiement en lignes de commande

#### R√©partir les d√©ploiements sur deux machines (nodes)

Avant de commencer, supprimez le cluster sur l'ancien d√©ploiement en ex√©cutant :  
`minikube delete`

Pour recr√©er le cluster avec deux machines, tapez :  
`minikube start --nodes 2`

Pour afficher le statut des deux nodes, ex√©cutez :  
`minikube status`

#### D√©ployer une image sur le cluster

Pour cr√©er un d√©ploiement avec deux r√©plicas, ex√©cutez la commande suivante :

```bash
kubectl create deployment myserver --replicas 2 --image=kicbase/echo-server:1.0
```

Explication de la commande :
- `kubectl create deployment myserver` : Cr√©e un d√©ploiement nomm√© `myserver`.
- `--replicas 2` : Cr√©e 2 r√©plicas (machines).

Pour v√©rifier l'√©tat du d√©ploiement, ex√©cutez les commandes suivantes :
- `kubectl get pods` : Affiche les pods.
- `kubectl get deployment` : Affiche les d√©ploiements.
- `kubectl get services` : Affiche les services.
- `kubectl get pods -o wide` : Affiche le statut d√©taill√© des pods.

Exemple de retour pour les pods :

| NAME                          | READY | STATUS  | RESTARTS | AGE  | IP           | NODE      |
|-------------------------------|-------|---------|----------|------|--------------|-----------|
| hello-matrix-7d864756b7-4d5r9 | 1/1   | Running | 0        | 17m  | 10.244.0.3   | minikube  |

---

### D√©ploiement par fichier de configuration

Vous pouvez aussi d√©finir la performance de votre d√©ploiement, par exemple en utilisant 4 CPUs et 4096 Mo de m√©moire :

```bash
minikube start --cpus 4 --memory 4096
```

#### D√©ployer une image Docker dans un cluster Kubernetes

##### D√©ployer une application

Ex√©cutez la commande suivante pour cr√©er un d√©ploiement avec l'image `fredericeducentre/matrix` :

```bash
kubectl create deployment hello-matrix --image=fredericeducentre/matrix
```

##### Exposer l'application

Pour exposer le d√©ploiement au port 80, ex√©cutez :

```bash
kubectl expose deployment hello-matrix --type=NodePort --port=80
```

##### V√©rifier les d√©ploiements et les pods

Pour voir les d√©ploiements et pods, utilisez :

```bash
kubectl get deployment
kubectl get pods
```

##### Voir les services

Ex√©cutez cette commande pour afficher les services expos√©s :

```bash
kubectl get services
```

Pour acc√©der au service via Minikube, utilisez :

```bash
minikube service hello-matrix
```

---

# CHAPITRE 2

## D√©ploiement de deux services qui doivent fonctionner ensemble (Application et Base de donn√©es)

Exemple : D√©ploiement de MySQL et PostgreSQL.

### 1. Pr√©requis

Avant de d√©ployer les fichiers YAML, assurez-vous que :
- Vous avez un cluster Kubernetes fonctionnel.
- Vous avez `kubectl` configur√© pour interagir avec votre cluster.
- Les images Docker (MySQL et WordPress) sont disponibles dans le registre Docker Hub ou un autre registre accessible par Kubernetes.

### 2. D√©ployer la premi√®re partie : MySQL (Base de donn√©es pour WordPress)

#### √âtape 2.1 : Appliquer le fichier YAML

Sauvegardez le contenu du fichier YAML dans un fichier, par exemple `wordpress-mysql.yaml`, puis ex√©cutez :

```bash
kubectl apply -f wordpress-mysql.yaml
```

Cela va cr√©er :
- Un **Service** exposant le port 3306 pour MySQL.
- Un **Deployment** pour d√©ployer MySQL avec des variables d'environnement telles que `MYSQL_ROOT_PASSWORD`, `MYSQL_DATABASE`, `MYSQL_USER`, et `MYSQL_PASSWORD`.

#### √âtape 2.2 : V√©rifier le d√©ploiement de MySQL

Ex√©cutez les commandes suivantes pour v√©rifier si le d√©ploiement est r√©ussi :

```bash
kubectl get deployments
kubectl get pods
```

### 3. D√©ployer la deuxi√®me partie : WordPress (Frontend)

#### √âtape 3.1 : Appliquer le fichier YAML

Sauvegardez le contenu du fichier YAML dans un fichier, par exemple `wordpress.yaml`, puis ex√©cutez :

```bash
kubectl apply -f wordpress.yaml
```

Cela va cr√©er :
- Un **Service** exposant WordPress sur le port 80 avec un `NodePort`.
- Un **Deployment** pour d√©ployer WordPress avec des variables d'environnement pointant vers le service MySQL (`wordpress-mysql`).

#### √âtape 3.2 : V√©rifier le d√©ploiement de WordPress

Ex√©cutez les commandes suivantes pour v√©rifier si le d√©ploiement est r√©ussi :

```bash
kubectl get deployments
kubectl get pods
```

### 4. Acc√©der √† WordPress

√âtant donn√© que le service WordPress est de type `NodePort`, vous pouvez y acc√©der via l'adresse IP du n≈ìud et le port attribu√©.

Ex√©cutez cette commande pour obtenir le port expos√© :

```bash
kubectl get services wordpress
```

### 5. V√©rifications finales

- V√©rifiez les pods en cours d'ex√©cution avec :  
  ```bash
  kubectl get pods
  ```
  
- V√©rifiez les services expos√©s avec :  
  ```bash
  kubectl get services
  ```

- Si n√©cessaire, consultez les logs des pods avec :  
  ```bash
  kubectl logs <pod-name>
  ```

### R√©sum√© des commandes principales :
1. Appliquer le fichier de d√©ploiement pour MySQL :
   ```bash
   kubectl apply -f wordpress-mysql.yaml
   ```

2. Appliquer le fichier de d√©ploiement pour WordPress :
   ```bash
   kubectl apply -f wordpress.yaml
   ```

3. V√©rifier les ressources d√©ploy√©es :
   ```bash
   kubectl get deployments
   kubectl get pods
   kubectl get services
   ```